<footer>

</footer>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
    $(document).ready(() => {
        $(".login-btn").on("click", (e) =>{
            let email = $("#email").val();
            let password = $("#password").val();
            let csrf_token = $('[name="csrfmiddlewaretoken"]').attr('value');

            $.ajax({
                method: 'POST',
                data: {email: email, password: password},
                type: "application/json",
                headers: { "X-CSRFToken": csrf_token },
                beforeSend: function (xhr) {
                   xhr.setRequestHeader('X-CSRFToken', '{{csrf_token}}');
                },
                url: '/rest-auth/login/',
                success: (response) => {
                    localStorage.setItem("key", response.key)
                    window.location.href='/dashboard/'
                },
                error: (err)=>{
                    alert("Fields didn't match. Please try again!")
                }
            });
        })
    })

    $(document).ready(() => {
        $(".reg-btn").on("click", (e) =>{
            let email = $("#email").val();
            let username = $("#username").val();
            let password1 = $("#password1").val();
            let password2 = $("#password2").val();
            let csrf_token = $('[name="csrfmiddlewaretoken"]').attr('value');

            $.ajax({
                method: 'POST',
                data: {email: email, username: username, password1: password1, password2: password2},
                type: "application/json",
                headers: { "X-CSRFToken": csrf_token },
                beforeSend: function (xhr) {
                   xhr.setRequestHeader('X-CSRFToken', '{{csrf_token}}');
                },
                url: '/rest-auth/registration/',
                success: (response) => {
                    localStorage.setItem("key", response.key)
                    window.location.href='/dashboard/'
                },
                error: (err)=>{
                    alert("Email and password didn't match. Please try again!")
                }
            });
        })
    })

    function logout(){
        let csrf_token = $('[name="csrfmiddlewaretoken"]').attr('value');
        $.ajax({
            method: 'POST',
            type: "application/json",
            headers: { "X-CSRFToken": csrf_token },
            url: '/rest-auth/logout/',
            success: (message) => {
                localStorage.clear();
                window.location.href='/'
            }
        });
    }
</script>